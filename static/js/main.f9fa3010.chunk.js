(this.webpackJsonpmyreads=this.webpackJsonpmyreads||[]).push([[0],{23:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},29:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(19),c=a.n(r),l=(a(28),a(3)),s=a(4),i=a(6),u=a(5),h=(a(29),a(22)),m=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleChange=function(t){e.props.changeShelf(e.props.book,t.target.value)},e}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.book,n=t.books,r="none",c=Object(h.a)(n);try{for(c.s();!(e=c.n()).done;){var l=e.value;l.id===a.id&&(r=l.shelf)}}catch(s){c.e(s)}finally{c.f()}return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:r,onChange:this.handleChange},o.a.createElement("option",{value:"none",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Have Read"),o.a.createElement("option",{value:"none"},"None")))}}]),a}(n.Component),b=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.books,a=e.book,n=e.changeShelf,r=a.imageLinks&&a.imageLinks.thumbnail?a.imageLinks.thumbnail:"icons/book-placeholder.svg",c=a.title?a.title:"No title available";return o.a.createElement("li",{key:a.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(r,")")}}),o.a.createElement(m,{books:t,book:a,changeShelf:n})),o.a.createElement("div",{className:"book-title"},c),a.authors&&a.authors.map((function(e,t){return o.a.createElement("div",{className:"book-authors",key:t},e)}))))}}]),a}(n.Component),f=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.books,a=e.shelf,n=e.changeShelf,r=t.filter((function(e){return e.shelf===a.value}));return o.a.createElement("ol",{className:"books-grid"},r.map((function(e,a){return o.a.createElement(b,{key:a,book:e,books:t,changeShelf:n})})))}}]),a}(n.Component),d=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.books,a=e.bookshelves,n=e.changeShelf;return o.a.createElement("div",{className:"list-books-content"},a.map((function(e,a){return o.a.createElement("div",{className:"bookshelf",key:a},o.a.createElement("h2",{className:"bookshelf-title"},e.name),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement(f,{shelf:e,books:t,changeShelf:n})))})))}}]),a}(n.Component),k=a(11),p=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.books,a=e.changeShelf,n=e.query,r=e.result,c=e.error,l=e.makeQuery,s=e.clearSearch;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(k.b,{className:"close-search",to:"/",onClick:s},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:n,onChange:l,default:r}))),o.a.createElement("div",{className:"search-books-results"},r.length>0&&o.a.createElement("div",null,o.a.createElement("h3",null,"Search returned ",r.length," books "),o.a.createElement("ol",{className:"books-grid"},r.map((function(e){return o.a.createElement(b,{book:e,books:t,shelf:e.shelf?e.shelf:"none",changeShelf:a})})))),c&&o.a.createElement("h3",null,"Search did not return any books. Please try again!")))}}]),a}(n.Component),v=a(13),g="https://reactnd-books-api.udacity.com",y=localStorage.token;y||(y=localStorage.token=Math.random().toString(36).substr(-8));var E={Accept:"application/json",Authorization:y},j=function(){return fetch("".concat(g,"/books"),{headers:E}).then((function(e){return e.json()})).then((function(e){return e.books}))},S=function(e,t){return fetch("".concat(g,"/books/").concat(e.id),{method:"PUT",headers:Object(v.a)(Object(v.a)({},E),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},O=function(e){return fetch("".concat(g,"/search"),{method:"POST",headers:Object(v.a)(Object(v.a)({},E),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},N=a(9),C=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={books:[],result:[],error:!1},e.makeQuery=function(t){var a=t.target.value;a?O(a).then((function(t){t.length>0?e.setState({result:t,error:!1}):e.setState({result:[],error:!0})})):e.setState({result:[],error:!1})},e.clearSearch=function(){e.setState({result:[],error:!1})},e.bookshelves=[{value:"currentlyReading",name:"Currently Reading"},{value:"wantToRead",name:"Want to Read"},{value:"read",name:"Have Read"}],e.componentDidMount=function(){j().then((function(t){e.setState({books:t})}))},e.changeShelf=function(t,a){S(t,a).then((function(){t.shelf=a,e.setState((function(e){return{books:e.books.filter((function(e){return e.id!==t.id})).concat([t])}}))}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state.books;return o.a.createElement("div",{className:"app"},o.a.createElement(N.a,{path:"/search",render:function(){return o.a.createElement(p,{books:t,changeShelf:e.changeShelf,query:e.query,result:e.state.result,error:e.state.error,makeQuery:e.makeQuery,clearSearch:e.clearSearch})}}),o.a.createElement(N.a,{exact:!0,path:"/",render:function(){return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement(d,{books:t,bookshelves:e.bookshelves,changeShelf:e.changeShelf}),o.a.createElement("div",{className:"open-search"},o.a.createElement(k.b,{to:"/search"},o.a.createElement("button",null,"Add a Book"))))}}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(k.a,null,o.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.f9fa3010.chunk.js.map